<!doctype html>
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
  <script src="./javascripts/csv2json.js"></script>
</head>
<body>
  <input type="file" id="files" name="files[]" multiple />
  <output id="list"></output>

  <script>
    function handleResults( array ) {
      jQuery( "<pre>" ).html( JSON.stringify( array ) ).appendTo( "body" );
    }

    jQuery("#files").on("change", function( ev ) {
      var files = ev.target.files;

      Array.prototype.forEach.call( files, function( file ) {
        var reader = new FileReader();

        reader.onload = function( ev ) {
          console.log(" ok ");
          window.csv2json( ev.target.result, {
            cb : handleResults
          });
        };

        reader.readAsText( file );
      });
    });
  </script>
</body>
</html>
